<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/tango.css">
    <link rel="shortcut icon" href="/wiki/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/wiki/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>Attention 1: Kotlin interfaceä¸èƒ½ä½¿ç”¨Lambdaè¡¨è¾¾å¼ - </title>
    <meta name="keywords" content=""/>
    <meta name="description" content=""/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/wiki/">Home</a>&nbsp;&#187;&nbsp;<a href="/wiki/#Kotlin">Kotlin</a>&nbsp;&#187;&nbsp;Attention 1: Kotlin interfaceä¸èƒ½ä½¿ç”¨Lambdaè¡¨è¾¾å¼
    <span class="updated">Page Updated&nbsp;
      2019-10-18 14:22
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">Attention 1: Kotlin interfaceä¸èƒ½ä½¿ç”¨Lambdaè¡¨è¾¾å¼</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#_1">ä½¿ç”¨åœºæ™¯</a><ul>
<li><a href="#kotlininterface">Kotlinè°ƒç”¨å†…éƒ¨interface</a></li>
<li><a href="#kotlinjava-interface">Kotlinè°ƒç”¨Java interface</a></li>
<li><a href="#kotlinjavajava-interface">Kotlinä½¿ç”¨Javaç±»è°ƒç”¨Java interface</a></li>
</ul>
</li>
<li><a href="#_2">æ€»ç»“</a></li>
<li><a href="#_3">æ€è€ƒğŸ¤”</a></li>
</ul>
</div>
<blockquote>
<p>æœ€è¿‘å°è¯•ä½¿ç”¨Kotlinç¼–å†™Android Appï¼Œåœ¨å°†Javaæ–‡ä»¶è½¬æ¢æˆKotlinæ—¶é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼š<br />
  åœ¨Kotlinä¸­ä½¿ç”¨interfaceæ—¶ï¼Œinterfaceä¸èƒ½è½¬æ¢æˆlambdaè¡¨è¾¾å¼  </p>
</blockquote>
<h1 id="_1">ä½¿ç”¨åœºæ™¯</h1>
<h2 id="kotlininterface">Kotlinè°ƒç”¨å†…éƒ¨interface</h2>
<div class="hlcode"><pre><span class="n">@RunWith</span><span class="p">(</span><span class="n">AndroidJUnit4</span><span class="p">::</span><span class="n">class</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">ExampleInstrumentedTest</span> <span class="p">{</span>
    <span class="n">@Test</span>
    <span class="k">fun</span> <span class="nf">useAppContext</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// é”™è¯¯âŒ</span>
        <span class="c1">// Error: Type mismatch: interred type is (View) -&gt; Unit but KotlinInterface was expected</span>
        <span class="n">setKotlinInterface</span> <span class="p">{</span> <span class="n">child</span><span class="p">:</span> <span class="n">View</span> <span class="p">-&gt;</span> <span class="n">useAppContext</span><span class="p">()</span> <span class="p">}</span>

        <span class="c1">// æ­£ç¡®âœ…</span>
        <span class="n">setKotlinInterface</span><span class="p">(</span><span class="n">object</span><span class="p">:</span> <span class="n">KotlinInterface</span> <span class="p">{</span>
            <span class="k">override</span> <span class="k">fun</span> <span class="nf">onClick</span><span class="p">(</span><span class="n">child</span><span class="p">:</span> <span class="n">View</span><span class="p">)</span> <span class="p">{</span>

            <span class="p">}</span>
        <span class="p">})</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">setKotlinInterface</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">KotlinInterface</span><span class="p">)</span> <span class="p">=</span> <span class="n">Unit</span>

    <span class="k">interface</span> <span class="n">KotlinInterface</span> <span class="p">{</span>
        <span class="k">fun</span> <span class="nf">onClick</span><span class="p">(</span><span class="n">child</span><span class="p">:</span> <span class="n">View</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h2 id="kotlinjava-interface">Kotlinè°ƒç”¨Java interface</h2>
<div class="hlcode"><pre><span class="n">@RunWith</span><span class="p">(</span><span class="n">AndroidJUnit4</span><span class="p">::</span><span class="n">class</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">ExampleInstrumentedTest</span> <span class="p">{</span>
    <span class="n">@Test</span>
    <span class="k">fun</span> <span class="nf">useAppContext</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// æ­£ç¡®âœ…</span>
        <span class="n">setJavaInterface</span><span class="p">(</span><span class="n">object</span> <span class="p">:</span> <span class="n">JavaInterface</span> <span class="p">{</span>
            <span class="k">override</span> <span class="k">fun</span> <span class="nf">onClick</span><span class="p">(</span><span class="n">child</span><span class="p">:</span> <span class="n">View</span><span class="p">?)</span> <span class="p">{</span>
            <span class="p">}</span>
        <span class="p">})</span>

        <span class="c1">// æ­£ç¡®âœ…ï¼Œä½¿ç”¨lambdaè¡¨è¾¾å¼</span>
        <span class="n">setJavaInterface</span><span class="p">(</span><span class="n">JavaInterface</span> <span class="p">{</span> <span class="p">})</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">setJavaInterface</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">JavaInterface</span><span class="p">)</span> <span class="p">=</span> <span class="n">Unit</span>
<span class="p">}</span>
</pre></div>


<ul>
<li>å¢åŠ çš„JavaInterface.java</li>
</ul>
<div class="hlcode"><pre><span class="c1">// JavaInterface.java</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">JavaInterface</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">child</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>


<h2 id="kotlinjavajava-interface">Kotlinä½¿ç”¨Javaç±»è°ƒç”¨Java interface</h2>
<div class="hlcode"><pre><span class="n">@RunWith</span><span class="p">(</span><span class="n">AndroidJUnit4</span><span class="p">::</span><span class="n">class</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">ExampleInstrumentedTest</span> <span class="p">{</span>
    <span class="n">@Test</span>
    <span class="k">fun</span> <span class="nf">useAppContext</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">val</span> <span class="n">testA</span> <span class="p">=</span> <span class="n">TestA</span><span class="p">()</span>
        <span class="c1">// æ­£ç¡®âœ…ï¼Œä½¿ç”¨lambdaè¡¨è¾¾å¼</span>
        <span class="n">testA</span><span class="p">.</span><span class="n">setJavaInterface</span> <span class="p">{</span> <span class="n">useAppContext</span><span class="p">()</span> <span class="p">}</span>

        <span class="c1">// æ­£ç¡®âœ…ï¼Œä½¿ç”¨lambdaè¡¨è¾¾å¼</span>
        <span class="c1">// æ³¨æ„è¿™ç§å†™æ³•æ­¤ç§å†™æ³•æ­¤æ—¶æ˜¯æ­£ç¡®çš„ï¼Œè€Œåœ¨ç¬¬ä¸€ç§åœºæ™¯ä¸­å°±æ˜¯ä¸æ­£ç¡®çš„</span>
        <span class="n">testA</span><span class="p">.</span><span class="n">setJavaInterface</span> <span class="p">{</span> <span class="n">child</span><span class="p">:</span> <span class="n">View</span><span class="p">?</span> <span class="p">-&gt;</span> <span class="n">print</span><span class="p">(</span><span class="s">&quot;${child?.id}&quot;</span><span class="p">)</span> <span class="p">}</span>

        <span class="c1">// æ­£ç¡®âœ…</span>
        <span class="n">testA</span><span class="p">.</span><span class="n">setJavaInterface</span><span class="p">(</span><span class="n">object</span> <span class="p">:</span> <span class="n">JavaInterface</span> <span class="p">{</span>
            <span class="k">override</span> <span class="k">fun</span> <span class="nf">onClick</span><span class="p">(</span><span class="n">child</span><span class="p">:</span> <span class="n">View</span><span class="p">?)</span> <span class="p">{</span>
                <span class="n">useAppContext</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="p">})</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">setJavaInterface</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">JavaInterface</span><span class="p">)</span> <span class="p">=</span> <span class="n">Unit</span>
<span class="p">}</span>
</pre></div>


<ul>
<li>å¢åŠ çš„TestA.java</li>
</ul>
<div class="hlcode"><pre><span class="c1">// TestA.java</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestA</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setJavaInterface</span><span class="o">(</span><span class="n">JavaInterface</span> <span class="n">param</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h1 id="_2">æ€»ç»“</h1>
<p>åˆšä»Javaåˆ‡æ¢åˆ°Kotlinï¼Œç¡®å®ä¸å¤ªé€‚åº”Kotlinå†…éƒ¨çš„ä¸€äº›ç¼–ç æ–¹å¼ï¼Œå…³äºä¸‹é¢çš„é—®é¢˜ä¹Ÿè¿˜éœ€è¦ä¹‹åå»æ·±å…¥çš„æ€è€ƒå’Œæ¢ç©¶ï¼š</p>
<blockquote>
<p>Kotlinåœ¨ä½¿ç”¨è‡ªå·±çš„interfaceæ—¶ï¼Œä¸ºä»€ä¹ˆä¸èƒ½ä½¿ç”¨lambdaè¡¨è¾¾å¼ï¼Ÿ<br />
ç›®å‰çš„æƒ³æ³•ï¼šæ ¹æ®é”™è¯¯æç¤ºï¼Œåœ¨Kotlinå†…éƒ¨æ–¹æ³•ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå¯¹åº”çš„lambdaè¡¨è¾¾å¼æ‰€è¡¨ç¤ºçš„æ–¹æ³•å¯¹è±¡ä¸interfaceå¯¹è±¡ä¸èƒ½ç­‰åŒ</p>
</blockquote>
<ul>
<li>éªŒè¯çŒœæµ‹ï¼Œåœ¨Kotlinæºæ–‡ä»¶ä¸­åŒæ—¶å£°æ˜å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•å¹¶ä¸ä¼šæŠ¥é”™ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™æ˜¯ä¸¤ä¸ª<code>é‡è½½</code>çš„æ–¹æ³•</li>
</ul>
<div class="hlcode"><pre><span class="k">fun</span> <span class="nf">setKotlinInterface</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">KotlinInterface</span><span class="p">)</span> <span class="p">=</span> <span class="n">Unit</span>
<span class="k">fun</span> <span class="nf">setKotlinInterface</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">child</span><span class="p">:</span> <span class="n">View</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">Unit</span><span class="p">)</span> <span class="p">=</span> <span class="n">Unit</span>
</pre></div>


<h1 id="_3">æ€è€ƒğŸ¤”</h1>
<p>åœ¨ç¼–ç æ—¶ï¼Œå¤§éƒ¨åˆ†æƒ…å†µæ˜¯åœ¨è®¾ç½®ç›‘å¬å™¨çš„æ—¶å€™ä½¿ç”¨interfaceï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§ï¼š</p>
<div class="hlcode"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomComponent</span> <span class="o">{</span>
    <span class="kd">interface</span> <span class="nc">Listener</span> <span class="o">{</span>
        <span class="kt">void</span> <span class="nf">onListen</span><span class="o">(</span><span class="n">Object</span> <span class="n">obj</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">Listener</span> <span class="n">listener</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setListener</span><span class="o">(</span><span class="n">Listener</span> <span class="n">listener</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">listener</span> <span class="o">=</span> <span class="n">listener</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>åœ¨Kotlinä¸­ï¼Œæ›´å¥½çš„æ–¹å¼å¯èƒ½æ˜¯è¿™æ ·ï¼š</p>
<div class="hlcode"><pre><span class="k">class</span> <span class="nc">CustomComponent</span> <span class="p">{</span>
    <span class="k">private</span> <span class="n">lateinit</span> <span class="k">var</span> <span class="n">listener</span><span class="p">:</span> <span class="p">(</span><span class="n">any</span><span class="p">:</span><span class="n">Any</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">Unit</span>

    <span class="k">fun</span> <span class="nf">setListener</span><span class="p">(</span><span class="n">listener</span><span class="p">:</span> <span class="p">(</span><span class="n">any</span><span class="p">:</span><span class="n">Any</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">Unit</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="n">listener</span> <span class="p">=</span> <span class="n">listener</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>è€Œä¸æ˜¯è¿™æ ·ï¼š</p>
<div class="hlcode"><pre><span class="k">class</span> <span class="nc">CustomComponent</span> <span class="p">{</span>
    <span class="k">private</span> <span class="n">lateinit</span> <span class="k">var</span> <span class="n">listener</span><span class="p">:</span> <span class="n">Listener</span>

    <span class="k">interface</span> <span class="n">Listener</span> <span class="p">{</span>
        <span class="k">fun</span> <span class="nf">onListen</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">setListener</span><span class="p">(</span><span class="n">listener</span><span class="p">:</span> <span class="n">Listener</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="n">listener</span> <span class="p">=</span> <span class="n">listener</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div id="footer">
      <span>
        <p>Copyright Â© 2019 .
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2019-10-18 14:23:58</p>
      </span>
    </div>

    
    
  </body>
</html>